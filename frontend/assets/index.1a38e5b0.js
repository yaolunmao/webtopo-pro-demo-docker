import{H as d,_ as $,u as w,a as B,r as i,K as I,C as j,o as N,c as b,e as E,f as C,a1 as l}from"./index.a653ca4b.js";import{s as r,g as z}from"./project.1f00b2bb.js";import{i as P}from"./style.f725a039.js";function S(a){return d({url:"/webtopo/svgnode/list",method:"get",params:a})}function x(a){return d({url:"/webtopo/svgnode",method:"post",data:a})}function O(a){return d({url:"/webtopo/svgnode/unbind",method:"delete",data:a})}const D={class:"webtopo-edit"},M={__name:"index",setup(a){const m=w(),p=B(),s=i(),v=i(null),n=i(""),g=i(!0),_=i({svg\u6587\u4EF6:[{groupType:"stateless",title:"\u7535\u529B\u7CFB\u7EDF",list:[{name:"testimg1",title:"\u80CC\u666F",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u80CC\u666F.jpg"}},{name:"testimg2",title:"\u5927\u6807\u9898\u80CC\u666F",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u5927\u6807\u9898\u80CC\u666F.png"}},{name:"testimg3",title:"\u70B9\u4F4Dicon",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u70B9\u4F4Dicon.png"}},{name:"testimg4",title:"\u5173\u95ED",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u5173\u95ED.png"}},{name:"testimg5",title:"\u7EA2",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u7EA2.png"}},{name:"testimg6",title:"\u9EC4",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u9EC4.png"}},{name:"testimg7",title:"\u5F00\u542F",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u5F00\u542F.png"}},{name:"testimg8",title:"\u7EFF",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u7EFF.png"}},{name:"testimg9",title:"\u89C6\u9891\u80CC\u666F",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u89C6\u9891\u80CC\u666F.png"}},{name:"testimg10",title:"\u5C0F\u6807\u9898\u80CC\u666F",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/\u5C0F\u6807\u9898\u80CC\u666F.png"}},{name:"add1",title:"add1",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add1.png"}},{name:"add2",title:"add2",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add2.png"}},{name:"add3",title:"add3",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add3.png"}},{name:"add4",title:"add4",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add4.png"}},{name:"add5",title:"add5",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add5.png"}},{name:"add6",title:"add6",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add6.png"}},{name:"add7",title:"add7",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add7.png"}},{name:"add8",title:"add8",type:"Image",config:{can_zoom:!0,have_anchor:!0,actual_rect:!0},display:!0,props:{},event:{click:{title:"\u70B9\u51FB",val:`      console.log('\u6D4B\u8BD5\u6253\u5370\u5F53\u524D\u7EC4\u4EF6json',$svg_item_info);
      //\u6267\u884CcallBack\u51FD\u6570
      $svgEventCallBack('\u56DE\u8C03\u7C7B\u578B',$svg_item_info.id,'\u6D4B\u8BD5\u56DE\u8C03\u8BA2\u9605')
      `,type:"None"}},common_animations:{val:"",delay:"delay-0s",speed:"slow",repeat:"infinite"},img:{width:100,height:100,url:"http://testpro.yaolm.top/add8.png"}}]}]}),u=()=>{console.log("\u70B9\u51FB\u4E86\u8FD4\u56DE\u6309\u94AE"),m.go(-1)},h=t=>{l.error("\u65E0\u6743\u9650\u8FDB\u884C\u6B64\u64CD\u4F5C")},y=t=>{console.log("\u70B9\u51FB\u4E86\u4FDD\u5B58\u6309\u94AE\uFF0C\u53EF\u4EE5\u5728\u6B64\u5904\u5C06\u56FE\u5B58\u5230\u6570\u636E\u5E93",t),r({projectId:n.value,dataModel:JSON.stringify(t),thumbnail:t.thumbnail}).then(e=>{l.success("\u4FDD\u5B58\u6210\u529F\uFF01")})},c=()=>{Promise.all([z(n.value),S({projectId:n.value})]).then(t=>{console.log(t,35),v.value={bind_device_list:t[1].data.map(e=>({bind_node_id:e.svgNodeId,bind_node_prop:e.svgNodeProp,device_id:String(e.deviceId),device_prop:e.deviceProp})),device_list:t[0].data.deviceList.map(e=>({id:String(e.deviceId),name:String(e.deviceName),prop_list:e.deviceDictList.map(o=>o)}))},s.value=t[0].data.dataModel,console.log(s,41),g.value=!1})},f=(t,e,o)=>{console.log("\u89E6\u53D1\u4E86\u8BBE\u5907\u7ED1\u5B9A",t,e,o),t==1?r({projectId:n.value,dataModel:JSON.stringify(o),thumbnail:o.thumbnail}).then(()=>{x({projectId:n.value,deviceId:e.device_id,svgNodeId:e.bind_node_id,svgNodeProp:e.bind_node_prop,deviceProp:e.device_prop}).then(k=>{l.success("\u7ED1\u5B9A\u6210\u529F"),c()})}):r({projectId:n.value,dataModel:JSON.stringify(o),thumbnail:o.thumbnail}).then(()=>{O({projectId:n.value,deviceId:e.device_id,svgNodeId:e.bind_node_id,svgNodeProp:e.bind_node_prop,deviceProp:e.device_prop}).then(k=>{l.success("\u89E3\u9664\u7ED1\u5B9A\u6210\u529F"),c()})})};return console.log(p.query,1414),n.value=p.query.project_id,c(),(t,e)=>{const o=I("loading");return j((N(),b("div",D,[E(C(P),{onOnReturn:u,onOnPreview:h,onOnSave:y,onOnDeviceBind:f,"data-model":s.value,"device-info":v.value,"append-toolbar":_.value},null,8,["data-model","device-info","append-toolbar"])])),[[o,g.value]])}}},L=$(M,[["__scopeId","data-v-34503c5c"]]);export{L as default};
